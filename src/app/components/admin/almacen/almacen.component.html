<!-- START BREADCRUMB -->
<ul class="breadcrumb push-down-0">
    <li>
      <a [routerLink]="['/admin']">Admin</a>
    </li>
    <li>
      <a [routerLink]="['/almacen']">Catalogos</a>
    </li>
    <li class="active">{{titulo}}</li>
  </ul>
  <!-- END BREADCRUMB -->  
  
  <!-- PAGE TITLE -->
  <div class="page-title">
    <h2>
      <span class="fa fa-arrow-circle-o-left"></span> {{ titulo }}</h2>
  </div>
  <!-- END PAGE TITLE -->

  <p-dialog header="Agregar Almacén" [(visible)]="display" [modal]="true" [responsive]="true" [width]="550" [minWidth]="200" [minY]="70" 
  [maximizable]="true">
    
    <form [formGroup]="form" (ngSubmit)="add(form.value)" >
        <div [ngClass]="(form.controls.clave.errors && form.controls.clave.touched)?'form-group has-feedback has-error' :'form-group ' ">
        <label class="control-label">Clave:</label>
        <input type="text" class="form-control" name="clave" formControlName="clave" >
        <span [ngClass]="(form.controls.clave.errors && form.controls.clave.touched)?'glyphicon glyphicon-remove form-control-feedback' :'' "></span>
    </div>
      
      <div [ngClass]="(form.controls.nombre.errors && form.controls.nombre.touched)?'form-group has-feedback has-error' :'form-group ' ">
          <label class="control-label">Nombre:</label>
          <input type="text" class="form-control" name="nombre" formControlName="nombre" required>
          <span [ngClass]="(form.controls.nombre.errors && form.controls.nombre.touched)?'glyphicon glyphicon-remove form-control-feedback' :'' "></span>
      </div>   
      
      <div class="form-group">
          <label class="control-label">Estatus:</label>
          <ui-switch [checked]="(statusForm)" color="#1b1e24" (change)="changeStatusForm(statusForm)"></ui-switch>
      </div>   

      <p-footer>
          <button type="submit" pButton icon="pi pi-check" label="Yes"></button>
          <button type="button" pButton icon="pi pi-times" (click)="display=false" label="No"></button>
      </p-footer>
    </form>
  
  </p-dialog>


  <p-confirmDialog></p-confirmDialog>


  

<!-- PAGE CONTENT WRAPPER -->
<div class="page-content-wrap">

  <!-- START RESPONSIVE TABLES -->
  <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">
    
          <div class="panel-heading">
            <div class="row">
              <div class="col-xs-12 col-sm-10 col-lg-8">
                <form #searchForm="ngForm" (ngSubmit)="onSearch()" class="search-data">
                  <div>
                    <input type="text" class="form-control" name="search" #search="ngModel" [(ngModel)]="dataForm.search" placeholder="Buscar..."/>
                  </div>
                  <div class="input-group">
                    <span class="input-group-addon">
                      Orden
                    </span>
                    <select class="form-control" name="order" #order="ngModel" [(ngModel)]="dataForm.order">
                      <option value="desc">Descendente</option>
                      <option value="asc">Ascendente</option>
                    </select>
                  </div>
                  <div class="input-group">
                    <span class="input-group-addon">
                      Estatus
                    </span>
                    <select class="form-control" name="estatus" #estatus="ngModel" [(ngModel)]="dataForm.estatus">
                      <option value="2">Todos</option>
                      <option value="1">Activo</option>
                      <option value="0">Inactivo</option>
                    </select>
                  </div>
                  <div>
                    <input type="submit" value="Buscar" class="btn btn-primary input-submit">
                  </div>
                </form>
              </div>
              <div class="col-xs-12 col-sm-2 col-lg-4">
                <ul class="panel-controls">
                  <li>
                    <button class="button-panel-table">
                      <span class="fa fa-angle-down"></span>
                    </button>
                  </li>
                  <li>
                    <button (click)="refresh();" class="button-panel-table">
                      <span class="fa fa-refresh"></span>
                    </button>
                  </li>
                  <li>
                    <button (click)="showDialog()" class="button-panel-table">
                      <span class="fa fa-plus"></span>
                    </button>
                  </li>
                </ul>
              </div>
            </div>
            
            
          
          </div>
    
          <div class="panel-body panel-body-table">
    
            <div class="table-responsive">
              <table class="table table-bordered table-striped table-actions">
                <thead>
                  <tr>
                    <th width="50">Id</th>
                    <th width="100">Clave</th>
                    <th width="100">Nombre</th>
                    <th width="50">Estatus</th>
                    <th width="50">Fecha</th>
                    <th width="50">Editar</th>
                    <th width="50">Eliminar</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let almacen of dataobjetc" class="task-item">
                    <td>{{ almacen.id }}</td>
                    <td>{{ almacen.clave }}</td>
                    <td>{{ almacen.nombre }}</td>
                    <td>
                      <span *ngIf="almacen.estatus === 0" class="label label-warning">Inactivo</span>
                      <span *ngIf="almacen.estatus === 1" class="label label-success">Activo</span>
                    </td>
                    <td>{{ almacen.created_at }}</td>
                    <td>
                      <button class="btn btn-default btn-rounded btn-sm" (click)="update(almacen.id)">
                        <span class="fa fa-pencil"></span>
                      </button>
                    </td>
                    <td>
                      <button class="btn btn-danger btn-rounded btn-sm" (click)="delete(almacen.id, almacen.clave)">
                        <span class="fa fa-times"></span>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
    
          <div class="panel-footer panel-footer-pagination">
            <div>
              Mostrar
              <select name="page" class="form-control" [(ngModel)]="numberPage" (change)="onChange()">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="40">40</option>
                <option value="50">50</option>
                <option value="60">60</option>
                <option value="70">70</option>
                <option value="80">80</option>
                <option value="90">90</option>
                <option value="100">100</option>
                <option value="200">200</option>
              </select>
              registros
            </div>
            <div class="dataTables_paginate" *ngIf="dataobjetc && dataobjetc.length >= 1">
              <a class="paginate_button page-first-child" (click)="nPage(pageCurrent)">
                Primero
              </a>
              <a class="paginate_button" (click)="nPage(pagePrev)">
                <span aria-hidden="true">&laquo;</span>
              </a>
              <span *ngFor="let page of pages">
          
                <a *ngIf="page == currentPage" class="paginate_button current" (click)="nPage(page)">{{ page}}</a>
                <a *ngIf="page != currentPage" class="paginate_button" (click)="nPage(page)">{{ page }}</a>
          
              </span>
              <a class="paginate_button" (click)="nPage(pNext)">
                <span aria-hidden="true">&raquo;</span>
              </a>
              <a class="paginate_button page-last-child" (click)="nPage(pageNext)">
                Último
              </a>
            </div>
          </div>
    
          
        </div>
    
      </div>
  </div>
  <!-- END RESPONSIVE TABLES -->

</div>
<!-- END PAGE CONTENT WRAPPER -->